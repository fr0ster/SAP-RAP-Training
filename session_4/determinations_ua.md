# üìÖ –†–æ–∑—à–∏—Ä–µ–Ω–∏–π –∫–æ–Ω—Å–ø–µ–∫—Ç: Determinations –≤ SAP RAP (Markdown, üá∫üá¶)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ / –ó–º—ñ—Å—Ç (TOC)

- [–©–æ —Ç–∞–∫–µ Determination —É RAP?](#-—â–æ-—Ç–∞–∫–µ-determination-–≤-sap-rap)
- [–¢–∏–ø–∏ Determinations](#-—Ç–∏–ø–∏-determinations)
- [–¢–∏–ø–∏ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó Determinations](#-—Ç–∏–ø–∏-—ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó-determinations)
- [–û–≥–æ–ª–æ—à–µ–Ω–Ω—è Determinations –≤ Behavior Definition](#-–æ–≥–æ–ª–æ—à–µ–Ω–Ω—è-determinations-–≤-behavior-definition)
- [–Ü–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—è Determinations —É Behavior Implementation](#-—ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—è-determinations-—É-behavior-implementation)
- [–ö–æ–ª–∏ —Å–ª—ñ–¥ (—ñ –Ω–µ —Å–ª—ñ–¥) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Determination](#-–∫–æ–ª–∏-—Å–ª—ñ–¥-—ñ-–Ω–µ-—Å–ª—ñ–¥-–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏-determination)
- [–ö—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏](#-–∫—Ä–∞—â—ñ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
- [–¢–∏–ø–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#-—Ç–∏–ø–æ–≤—ñ-—Å—Ü–µ–Ω–∞—Ä—ñ—ó-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)
- [–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ Determination](#-—Ç–∏–ø–æ–≤—ñ-–ø–æ–º–∏–ª–∫–∏-–ø—Ä–∏-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ-determination)

---

### üí™ –©–æ —Ç–∞–∫–µ Determination –≤ SAP RAP

**Determination** ‚Äî —Ü–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É –æ–±'—î–∫—Ç–∞ –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –≤–∏–∫–ª–∏–∫—É. [SAP Help](https://help.sap.com/docs/abap-cloud/abap-rap/determinations)

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è:
- –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–∏—Ö –ø–æ–ª—ñ–≤;
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–Ω–∞—á–µ–Ω—å –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –æ–±'—î–∫—Ç–∞;
- –û–±—á–∏—Å–ª–µ–Ω—å, —â–æ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ —ñ–Ω—à–∏—Ö –ø–æ–ª—ñ–≤.

> üì¢ Determinations ‚Äî "–ø–∞—Å–∏–≤–Ω—ñ" –æ–±—Ä–æ–±–∫–∏, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–µ–∞–≥—É—é—Ç—å –Ω–∞ –∑–º—ñ–Ω–∏.

---

### üî¢ –¢–∏–ø–∏ Determinations

| –¢–∏–ø | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|:---|:-----|:--------|
| **Create** | –°–ø—Ä–∞—Ü—å–æ–≤—É—î –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –æ–±'—î–∫—Ç–∞. | –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `currency_code` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. |
| **Update** | –ü—Ä–∏ –∑–º—ñ–Ω—ñ –ø–æ–ª—ñ–≤. | –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ `total_amount` –ø—Ä–∏ –∑–º—ñ–Ω—ñ `quantity` –∞–±–æ `price`. |
| **Before Save** | –ü–µ—Ä–µ–¥ –∑–∞–ø–∏—Å–æ–º —É –ë–î. | –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `finalized_flag` –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º. |
| **After Modify** | –ü—ñ—Å–ª—è –∑–º—ñ–Ω –≤ –ø–∞–º'—è—Ç—ñ. | –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏. |

> üìö [SAP Help: Determination Types](https://help.sap.com/docs/abap-cloud/abap-rap/determinations)

---

### üë©‚Äçüíª –¢–∏–ø–∏ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó Determinations

| –¢–∏–ø —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|:------------------|:-----|:--------|
| **Instance Determination** | –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —ñ–Ω—Å—Ç–∞–Ω—Ü—ñ—ó (%key). | –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. |
| **Static Determination** | –ë–µ–∑ —ñ–Ω—Å—Ç–∞–Ω—Ü—ñ—ó (—Ä—ñ–¥–∫–æ). | –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —É–Ω—ñ–∫–∞–ª—å–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞. |
| **Field-triggered Determination** | –ü—Ä–∏ –∑–º—ñ–Ω—ñ –ø–µ–≤–Ω–∏—Ö –ø–æ–ª—ñ–≤. | –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—ñ–≤ –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—É–º–∏. |
| **Lifecycle-triggered Determination** | –ù–∞ —Ñ–∞–∑–∞—Ö –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É. | –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–∞—Ç—É—Å—É –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ. |

> üìö [SAP Help: Determination Implementation](https://help.sap.com/docs/abap-cloud/abap-rap/implement-determinations)

---

### ‚úèÔ∏è –û–≥–æ–ª–æ—à–µ–Ω–Ω—è Determinations –≤ Behavior Definition

```abap
define behavior for ZI_SalesOrder
persistent table ZSalesOrder
lock master
{
  determination set_default_values on create;
  determination recalculate_total on modify field quantity, price;
  determination finalize_status before save;
}
```

> üìö [SAP Help: Behavior Definitions](https://help.sap.com/docs/abap-cloud/abap-rap/behavior-definitions)

---

### üõ†Ô∏è –Ü–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—è Determinations —É Behavior Implementation

```abap
METHOD set_default_values.
  LOOP AT keys INTO DATA(ls_key).
    UPDATE zsalesorder
      SET status = 'DRAFT',
          currency_code = 'USD'
      WHERE salesorder_id = @ls_key-salesorder_id.
  ENDLOOP.
ENDMETHOD.

METHOD recalculate_total.
  LOOP AT keys INTO DATA(ls_key).
    SELECT SINGLE quantity, price
      INTO @DATA(ls_order)
      FROM zsalesorder
      WHERE salesorder_id = @ls_key-salesorder_id.

    DATA(lv_total) = ls_order-quantity * ls_order-price.

    UPDATE zsalesorder
      SET total_amount = @lv_total
      WHERE salesorder_id = @ls_key-salesorder_id.
  ENDLOOP.
ENDMETHOD.

METHOD finalize_status.
  LOOP AT keys INTO DATA(ls_key).
    UPDATE zsalesorder
      SET finalized_flag = abap_true
      WHERE salesorder_id = @ls_key-salesorder_id.
  ENDLOOP.
ENDMETHOD.
```

> üìö [SAP Help: Behavior Implementations](https://help.sap.com/docs/abap-cloud/abap-rap/implement-determinations)

---

### üß† –ö–æ–ª–∏ —Å–ª—ñ–¥ (—ñ –Ω–µ —Å–ª—ñ–¥) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Determination

| –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ | –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ |
|:----------------|:-------------------|
| –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Å–∫–ª–∞–¥–µ–Ω–∏—Ö/–æ–±—á–∏—Å–ª—é–≤–∞–Ω–∏—Ö –ø–æ–ª—ñ–≤ | –ü—Ä–æ—Å—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–π–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å —á–µ—Ä–µ–∑ CDS Default |
| –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–ª–µ–∂–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å | –°—Ç–∞—Ç—É—Å–Ω—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏ ‚Äî –∫—Ä–∞—â–µ —á–µ—Ä–µ–∑ Actions |
| –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ | –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö ‚Äî –∫—Ä–∞—â–µ —á–µ—Ä–µ–∑ Validations |
| –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏ —É brownfield | –ü—Ä—è–º–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏ (Actions –∫—Ä–∞—â–µ) |

> üìö [SAP Best Practices: RAP Determinations](https://help.sap.com/docs/abap-cloud/abap-rap/determinations)

---

### ‚úÖ –ö—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏

| ‚úÖ –ü—Ä–∞–∫—Ç–∏–∫–∞ | üîç –ß–æ–º—É? |
|:-----------|:---------|
| –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å, –∞ –Ω–µ –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å | –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∫–æ–¥—É |
| –ü—Ä–∏–≤'—è–∑—É–≤–∞—Ç–∏ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø–æ–ª—ñ–≤ | –ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ |
| –£–Ω–∏–∫–∞—Ç–∏ –ª–∞–Ω—Ü—é–≥–æ–≤–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤ Determination | –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–º —Ü–∏–∫–ª–∞–º |
| –°—Ç–µ–∂–∏—Ç–∏ –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω–æ—é —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—é | –ö–æ–Ω—Ç—Ä–æ–ª—å —É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö |
| –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ Field Triggers | –ü–æ–ª–µ–≥—à–µ–Ω–Ω—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ |

---

# üõ†Ô∏è –¢–∏–ø–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## ‚úÖ Greenfield —Å—Ü–µ–Ω–∞—Ä—ñ—ó

| –°—Ü–µ–Ω–∞—Ä—ñ–π | –ü—Ä–∏–∫–ª–∞–¥ | –ü—Ä–∏–º—ñ—Ç–∫–∞ |
|:---------|:--------|:---------|
| –û–±—á–∏—Å–ª–µ–Ω–Ω—è —Å—É–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —ñ —Ü—ñ–Ω–∏ | –ü—ñ—Å–ª—è –∑–º—ñ–Ω–∏ `quantity` –∞–±–æ `price` –ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ `total_amount` —á–µ—Ä–µ–∑ Determination. | [SAP Help: Field Control and Determinations](https://help.sap.com/docs/abap-cloud/abap-rap/field-control) |
| –î–∏–Ω–∞–º—ñ—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–∞–ª—é—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫—Ä–∞—ó–Ω–∏ –∫–ª—ñ—î–Ω—Ç–∞ | –ü—Ä–∏ –∑–º—ñ–Ω—ñ `customer_id`, –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤–∞–ª—é—Ç—É –∫–ª—ñ—î–Ω—Ç–∞ –∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ —ñ –ø—ñ–¥—Å—Ç–∞–≤–∏—Ç–∏ –≤ `currency_code`. | –ß–µ—Ä–µ–∑ `on modify field customer_id`. |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ | –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `order_date = sy-datum`. | –ß–µ—Ä–µ–∑ Determination `on create`. |

> ‚ùó –°—Ç–∞—Ç—É—Å `Draft` –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω–æ —ñ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–∫—Ä–µ–º–æ—ó Determination.

## ‚úÖ Brownfield —Å—Ü–µ–Ω–∞—Ä—ñ—ó

| –°—Ü–µ–Ω–∞—Ä—ñ–π | –ü—Ä–∏–∫–ª–∞–¥ | –ü—Ä–∏–º—ñ—Ç–∫–∞ |
|:---------|:--------|:---------|
| –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–ª–µ–∂–Ω–∏—Ö –ø–æ–ª—ñ–≤ —É —Å—Ç–∞—Ä–∏—Ö —Ç–∞–±–ª–∏—Ü—è—Ö | –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `gross_amount` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ `net_amount` –∑–∞ —Å—Ç–∞—Ä–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏. | |
| –í–∏—Ç—è–≥ –∑–Ω–∞—á–µ–Ω—å —ñ–∑ lookup-—Ç–∞–±–ª–∏—Ü—å | –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—ñ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –æ–ø–∏—Å—É –ø—Ä–æ–¥—É–∫—Ç—É –∑–∞ `product_id` –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∑–∞–ø–∏—Å—É. | |
| –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ | –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É –¥–∞—Ç–∏ YYMMDD —É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π YYYYMMDD –ø—Ä–∏ –∑–∞–ø–∏—Å—ñ. | |

---

# ‚ùå –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ Determination

| –ü–æ–º–∏–ª–∫–∞ | –ü–æ—è—Å–Ω–µ–Ω–Ω—è |
|:--------|:----------|
| –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Determination –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –¥–µ—Ñ–æ–ª—Ç—ñ–≤ | –ö—Ä–∞—â–µ —Ä–æ–±–∏—Ç–∏ —á–µ—Ä–µ–∑ `@DefaultValue`. |
| –ó–∞—Ü–∏–∫–ª–µ–Ω–Ω—è –∑–º—ñ–Ω —Ç—Ä–∏–≥–µ—Ä–Ω–∏—Ö –ø–æ–ª—ñ–≤ | –í–∏–∫–ª–∏–∫–∞—î –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π –ª–∞–Ω—Ü—é–≥ –≤–∏–∫–ª–∏–∫—ñ–≤. |
| –ü–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—è–º–∏ | –ú–∞—î –±—É—Ç–∏ —á–µ—Ä–µ–∑ Validations, –Ω–µ —á–µ—Ä–µ–∑ Determinations. |
| –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –ø–æ–ª—ñ–≤-—Ç—Ä–∏–≥–µ—Ä—ñ–≤ | –£—Å–∫–ª–∞–¥–Ω—é—î —Å—É–ø—Ä–æ–≤—ñ–¥ –ø—Ä–æ–µ–∫—Ç—É. |

---

# ‚ö° –ü—Ä–∏–∫–ª–∞–¥–∏ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Determinations

## ‚ùå –ü—Ä–∏–∫–ª–∞–¥: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ—Ñ–æ–ª—Ç—ñ–≤

```abap
METHOD set_default_country.
  LOOP AT keys INTO DATA(ls_key).
    UPDATE zsalesorder
      SET country = 'UA'
      WHERE salesorder_id = @ls_key-salesorder_id.
  ENDLOOP.
ENDMETHOD.
```
> ‚ùó –¶–µ –∫—Ä–∞—â–µ –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ CDS `@DefaultValue: 'UA'`.

---

# üìñ –í–∏—Ç—è–≥–∏ –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó SAP

> "Determinations should automatically derive or adjust attributes during a transactional lifecycle without explicit user interaction."  
> ‚Äî [SAP RAP Documentation](https://help.sap.com/docs/abap-cloud/abap-rap/determinations)

> "Default values should primarily be defined in the CDS model where possible to avoid redundant coding."  
> ‚Äî [SAP RAP Best Practices](https://help.sap.com/docs/abap-cloud/abap-rap/best-practices)

> "Use create determinations for setting derived attributes at instance creation time; use modify or before-save determinations for derived values that depend on changes made during the transaction."  
> ‚Äî [SAP RAP Best Practices](https://help.sap.com/docs/abap-cloud/abap-rap/best-practices)

---

# ‚úÖ –ß–µ–∫–ª—ñ—Å—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —è–∫—ñ—Å–Ω–æ—ó Determination

| –ü–∏—Ç–∞–Ω–Ω—è | –ü—Ä–∏–º—ñ—Ç–∫–∞ |
|:--------|:---------|
| –ß–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω–∞ –¥–æ –ø–æ–¥—ñ–π –∞–±–æ –∑–º—ñ–Ω –ø–æ–ª—ñ–≤? | –ú–∞—î –±—É—Ç–∏ `on create`, `on modify field ...`. |
| –ß–∏ –Ω–µ –∑–º—ñ–Ω—é—î –ø–æ–ª—è, —â–æ —Ç—Ä–∏–≥–µ—Ä—è—Ç—å —Å–∞–º—É Determination? | –©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Ü–∏–∫–ª—ñ–≤. |
| –ß–∏ –æ–±—á–∏—Å–ª—é—î —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–µ—Ñ–æ–ª—Ç–∏? | –ü—Ä–æ—Å—Ç–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è ‚Äî –∫—Ä–∞—â–µ –≤ CDS. |
| –ß–∏ –º–∞—î –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –ø–µ—Ä–µ–ª—ñ–∫ —Ç—Ä–∏–≥–µ—Ä–Ω–∏—Ö –ø–æ–ª—ñ–≤? | –î–ª—è –ø—Ä–æ–∑–æ—Ä–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏. |

---

# ‚ú® –î–æ–±—Ä—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Determinations

## ‚úÖ –ü—Ä–∏–∫–ª–∞–¥: –ö–æ—Ä–µ–∫—Ç–Ω–∏–π –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ Total

```abap
METHOD recalculate_total_amount.
  LOOP AT keys INTO DATA(ls_key).
    SELECT SINGLE quantity, price
      INTO @DATA(ls_order)
      FROM zsalesorder
      WHERE salesorder_id = @ls_key-salesorder_id.

    IF ls_order-quantity IS NOT INITIAL AND ls_order-price IS NOT INITIAL.
      DATA(lv_total) = ls_order-quantity * ls_order-price.
      UPDATE zsalesorder
        SET total_amount = @lv_total
        WHERE salesorder_id = @ls_key-salesorder_id.
    ENDIF.
  ENDLOOP.
ENDMETHOD.
```
> ‚úîÔ∏è –î–æ–±—Ä–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞: —Ç—ñ–ª—å–∫–∏ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –±–µ–∑ –∑–º—ñ–Ω —Ç—Ä–∏–≥–µ—Ä–Ω–∏—Ö –ø–æ–ª—ñ–≤.

---